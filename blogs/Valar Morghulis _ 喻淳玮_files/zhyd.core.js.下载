(function(b){b.extend({notification:{isSupported:function(){return"Notification" in window},isPermissionGranted:function(){return Notification.permission==="granted"},requestPermission:function(){if(!this.isSupported()){return}Notification.requestPermission(function(d){var a=Notification.permission})},show:function(a){if(!this.isSupported()){return}if(!this.isPermissionGranted()){return}var f=b.extend({title:"您有一条新消息",icon:appConfig.staticPath+"/img/notification.png",delay:5000,notification:null},a);var g=new Notification(f.title,{icon:f.icon,noscreen:true,body:decodeURIComponent(f.notification)});var h=localStorage.getItem("hide");if(!h||parseInt(h)<new Date().getDate()){g.onshow=function(){setTimeout(function(){g.close()},f.delay)}}g.onclick=function(){g.close();localStorage.setItem("hide",new Date().getDate())};g.onerror=function(){};g.onclose=function(){}}}})})(jQuery);(function(b){b.extend({websocket:{_this:null,_initialized:false,init:function(f){if(!this.isSupported()){return}var e=b.extend({callback:function(){},host:null,reconnect:false},f);if(!e.host){return}try{}catch(a){return}this._initialized=true},open:function(a){var d=b.extend({callback:function(){},host:null,reconnect:false},a);if(this._initialized){this.close()}this.init(a);window.onbeforeunload=function(){b.websocket.close()}},isSupported:function(){return"WebSocket" in window},send:function(a){if(!this._this){return}this._this.send(a)},close:function(){if(!this._this){return}this._this.close()}}})})(jQuery);(function(b){b.jqAlert=b.alert;b.jqConfirm=b.confirm;b.extend({alert:{info:function(a,f,e){f=f?"confirm|"+f:"confirm|3000";b.jqAlert({title:"友情提示",content:a,confirmButton:"关闭",autoClose:f,confirm:e})},error:function(a,f,e){f=f?"confirm|"+f:"confirm|3000";b.jqAlert({title:"警告",content:a,confirmButton:"关闭",autoClose:f,confirm:e})},confirm:function(h,f,a,g){g=g?"cancel|"+g:"cancel|5000";b.jqConfirm({confirmButtonClass:"btn-success",cancelButtonClass:"btn-default",title:"友情提示",content:h,autoClose:g,confirmButton:"确定",cancelButton:"关闭",confirm:f,cancel:a})},ajaxSuccessConfirm:function(a,d){if(a.status==200){if(a.message){b.alert.confirm(a.message,d)}}else{if(a.message){b.alert.error(a.message)}}},ajaxSuccess:function(a){if(a.status==200){if(a.message){b.alert.info(a.message)}}else{if(a.message){b.alert.error(a.message)}}},}});b.extend({tool:{isEmpty:function(a){return a==null||this.trim(a)==""},isInteger:function(){return(new RegExp(/^\d+$/).test(this))},isNumber:function(d,a){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this))},trim:function(a){if(a==null){return""}return a.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},html2Txt:function(a){a=this.trim(a);a=a.replace(/(\n)/g,"");a=a.replace(/(\t)/g,"");a=a.replace(/(\r)/g,"");a=a.replace(/<\/?[^>]*>/g,"");a=a.replace(/\s*/g,"");return a},currentPath:function(){var e=document.domain;var f=document.URL;var a=document.referrer;return window.location.pathname},getMeta:function(a){var f=document.getElementsByTagName("meta");var g="";for(var h in f){if(typeof f[h].name!="undefined"&&f[h].name.toLowerCase()==a.toLowerCase()){g=f[h].content;break}}return g},random:function(d,a){return Math.floor((Math.random()*a)+d)},parseFormSerialize:function(j){var l={};if(!j){return null}var a=j.split("&");for(var k=0,m=a.length;k<m;k++){var h=a[k].split("=");l[h[0]]=decodeURIComponent(h[1])}return l}}});b.extend(String.prototype,{trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(a){return new RegExp("^"+a).test(this)},endsWith:function(a){return new RegExp(a+"$").test(this)},replaceSuffix:function(a){return this.replace(/\[[0-9]+\]/,"["+a+"]").replace("#index#",a)},getRequestURI:function(){var a=this.indexOf("?");return(a==-1)?this:this.substr(0,a)},getParams:function(l){var o={},n=this.indexOf("?");if(n!=-1){var p=this.substr(n+1),k=p.split("&");for(var q=0;q<k.length;q++){var m=k[q].split("=");var a=l?m[1].encodeParam():m[1];o[m[0]]=m.length>1?a:""}}return o},encodeParam:function(){return encodeURIComponent(this)},replaceAll:function(d,a){return this.replace(new RegExp(d,"gm"),a)},skipChar:function(a){if(!this||this.length===0){return""}if(this.charAt(0)===a){return this.substring(1).skipChar(a)}return this},isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/).test(this))},isInteger:function(){return(new RegExp(/^\d+$/).test(this))},isNumber:function(d,a){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this))},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this))},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim()))},isSpaces:function(){for(var a=0;a<this.length;a+=1){var d=this.charAt(a);if(d!=" "&&d!="\n"&&d!="\t"&&d!="\r"){return false}}return true},isMobile:function(){return(new RegExp(/(^[0-9]{11,11}$)/).test(this))},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this))},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1},parseCurrency:function(a){var d=parseFloat(this);return parseFloat(d.toFixed(a||2))}});b.extend(Date.prototype,{format:function(f){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(f)){f=f.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var a in e){if(new RegExp("("+a+")").test(f)){f=f.replace(RegExp.$1,RegExp.$1.length==1?e[a]:("00"+e[a]).substr((""+e[a]).length))}}return f}});b.extend({rating:{_rating:".rating",init:function(a){a=(a||5)+1;b(this._rating).each(function(){var m=b(this);var o=parseInt(m.attr("data-star")||0);var j="",n="";for(var k=1;k<a;k++){if(o>0&&k<=o){n="active"}j+='<i class="fa fa-star-o '+n+'"></i> ';n=""}m.html(j);if(m.hasClass("ignore")){return}var l=m.find("i");l.each(function(){b(this).mouseover(function(){l.each(function(){b(this).removeClass("active")});b(this).addClass("active");var c=b(this).prevAll();c.each(function(){b(this).addClass("active")})})});m.on("click","i",function(){var c=b(this).prevAll();var d=c.length+1})})}}});b.extend({bubble:{_tip:["法制","爱国","敬业","诚信","友善","富强","民主","文明","和谐","自由","平等","公正"],init:function(){var a=0;b("body").click(function(j){a=a>=b.bubble._tip.length?0:a;if(!j.originalEvent){return}var m=j.originalEvent.x||j.originalEvent.layerX||0;var e=j.originalEvent.y||j.originalEvent.layerY||0;var l='<span style="position: fixed;z-index:9999;left: '+m+"px;top: "+e+'px;"></span>';var k=b(l).appendTo(b(this));k.effectBubble({y:-100,className:"thumb-bubble",fontSize:0.5,content:'<i class="fa fa-smile-o"></i>'+b.bubble._tip[a]});setTimeout(function(){k.remove()},1002);a++})},unbind:function(a){b("body").unbind("click");if(a&&!isNaN(a=parseInt(a))){setTimeout(function(){b.bubble.init()},a)}}}});b.fn.extend({flipCard:function(a){var d=b.extend({},a);return this.each(function(){var c=b(this);c.removeClass("animation-rotate-up").removeClass("animation-rotate-up-back");c.addClass("animation-rotate-up");setTimeout(function(){c.addClass("animation-rotate-up-back")},500)})},effectBubble:function(a){var d=b.extend({content:"+1",y:-100,duration:1000,effectType:"ease",className:"",fontSize:2},a);return this.each(function(){var c=b(this),l="effect-fly-"+(new Date().getTime());var m='<span id="#flyId#" class="effect-bubble-fly #class#" style="opacity: 1;top:#top#px;left:#left#px;font-size: #fontSize#rem;">#content#</span>';var k=m.replaceAll("#left#",12).replaceAll("#top#",-8).replaceAll("#flyId#",l).replaceAll("#content#",d.content).replaceAll("#class#",d.className).replaceAll("#fontSize#",d.fontSize);var j=b(k).appendTo(c);j.fadeIn(100,"swing",function(){j.animate({top:d.y,opacity:0},100,function(){j.fadeOut(d.duration,function(){j.remove()})})})})}})})(jQuery);(function(b){b.fn.toTop=function(k){var j=this;var g=b(window);var h=b("html, body");var a=k;if(!a){a=b.extend({autohide:true,offset:100,speed:500,right:15,bottom:50},k)}j.css({position:"fixed",right:a.right,bottom:a.bottom,cursor:"pointer"});if(a.autohide){j.css("display","none")}j.click(function(){h.animate({scrollTop:0},a.speed)});g.scroll(function(){var c=g.scrollTop();if(a.autohide){if(c>a.offset){j.fadeIn(a.speed)}else{j.fadeOut(a.speed)}}})}})(jQuery);(function(b){b.fn.textSlider=function(a){a=jQuery.extend({speed:"normal",line:2,timer:3000},a);return this.each(function(){b.fn.textSlider.scllor(b(this),a)})};b.fn.textSlider.scllor=function(r,a){var s=b("ul:eq(0)",r);var q;var o=s.children();var u=b(o[0]).height();var p=0-a.line*u;var m=function(){s.animate({marginTop:p},a.speed,function(){for(i=0;i<a.line;i++){s.find("li:first",r).appendTo(s)}s.css({marginTop:0})})};var t=function(){q=window.setInterval(m,a.timer)};var n=function(){window.clearInterval(q)};s.hover(n,t).mouseout()}})(jQuery);