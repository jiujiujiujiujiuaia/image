var appConfig={wwwPath:"http://localhost:8443",cmsPath:"http://localhost:8085",staticPath:"http://localhost:8443",qiuniuBasePath:"http://pevxlquq3.bkt.clouddn.com/",wxPraiseCode:"qrcode/wx_code.png",zfbPraiseCode:"qrcode/zfb_code.png"};function initNavbar(){$(".navbar .navbar-nav li").each(function(){var a=$(this);if(a.hasClass("dropdown")){a.on("mouseover",function(){a.addClass("open").find("a:first-child").attr("aria-expanded","true")}).on("mouseout",function(){a.removeClass("open").find("a:first-child").attr("aria-expanded","false")})}a.find("a").each(function(){var c=$(this);var b=c.parent();b.removeClass("active");if(c.attr("href")===$.tool.currentPath()){b.toggleClass("active")}})})}function initArticeMenu(){$(function(){if($(".blog-info-body")&&$(".blog-info-body")[0]){var i=[0,10,20,30,40];var g,a,b;var d=0;$(".blog-info-body").find("h2,h3").each(function(n,k){var l=$(this);l.before($('<span id="menu_'+n+'" class="menu-point"></span>'));l.addClass("menu-title");var m=l.text();var o=l[0].tagName.toLowerCase();var j=parseInt(o.charAt(1))-1;b='<i class="fa fa-angle-right"></i>';a='<a href="#menu_'+n+'" style="display:inline-block;">'+m+"</a>";g='<li style="padding-left:'+i[j]+'px;line-height: 2;">'+b+a+"</li>";$("#article-menu ul").append(g);d++});if(d>0){$("#article-menu").show();$(".article-module").removeClass("hide");var h=$(document);var e=$(".article-module");var f=$(window);f.scroll(function(){c()});c();function c(){if($.tool.currentPath().indexOf("/article/")!==-1){if(h.scrollTop()>=200){if(!e.hasClass("fixed")){var j=f.width()>768?"85px":"55px";e.addClass("fixed").css({width:"21.7%",right:0,border:"1px solid rgba(0, 0, 0, 0.1)"}).animate({top:j},100);$(".close-article-menu").removeClass("hide")}}else{e.removeClass("fixed").removeAttr("style");$(".close-article-menu").addClass("hide")}}}$(".close-article-menu").click(function(){e.addClass("hide")})}}})}function initScrollMenu(){var d=$("#topmenu");var f=$("#mainmenu");var b=$(window);var c=$(document);var a=$(".article-module");e();b.scroll(function(){e()});function e(){if(c.scrollTop()>=100){if(!f.hasClass("transparent")){d.animate({opacity:"0"},0);f.addClass("transparent");if(b.width()>768){f.animate({top:"0","z-index":1000},1)}}}else{d.animate({opacity:"1"},0);f.removeClass("transparent");if(b.width()>768){f.animate({top:"30","z-index":998},1)}}}}var PaymentUtils=window.payment||{config:[{url:appConfig.qiuniuBasePath+appConfig.zfbPraiseCode,desc:"支付宝转账"},{url:appConfig.qiuniuBasePath+appConfig.wxPraiseCode,desc:"微信转账"}],show:function(){$("#reward").modal("show");this.change(0);$("#reward input").on("ifChecked",function(b){var a=$(this).data("index");PaymentUtils.change(a)})},hide:function(){$("#reward").modal("hide")},change:function(b){var a=this.config[b];$("#qrcode-container").empty();$('<img  src="'+a.url+'" style="width: 250px;height: auto;" alt="'+a.desc+'">').appendTo($("#qrcode-container"))}};var wesocketMsgResolver={online:function(a){a&&$(".online").html(a)},notification:function(a){a&&$.notification.show({notification:a})}};$(function(){$(document).ready(function(){NProgress.start()});$(window).load(function(){NProgress.done()});initNavbar();initArticeMenu();initScrollMenu();$(".to-top").toTop({autohide:true,offset:100,speed:500,right:25,bottom:50});$("[data-toggle='tooltip']").tooltip();$('[data-toggle="popover"]').popover();$(".showImage").fancybox();$(document).ajaxStart(function(){NProgress.start()}).ajaxStop(function(){NProgress.done()});if($("#scrolldiv")){$("#scrolldiv").textSlider({line:1,speed:300,timer:5000})}if($.rating){$.rating.init(5)}if($.bubble){$.bubble.init()}e();setInterval(function(){e()},1000);function e(){var g=new Date();var f=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];$("#currentTime").html(g.format("yyyy年MM月dd日 hh时mm分ss秒")+" "+f[g.getDay()])}if($.websocket){var b=appConfig.cmsPath;var d={"http://":"ws://","https://":"wss://"};var c,a;$.each(d,function(g,f){if(b.startsWith(g)){a=f;c=b.replaceAll(g,"");return false}});c=c||document.domain+":8085";if(c){$.notification.requestPermission();$.websocket.open({host:a+c+"/websocket",reconnect:true,callback:function(g){console.log(g);var f=JSON.parse(g);wesocketMsgResolver[f.fun](f.msg)}})}else{console.warn("网站host获取失败，将不启动webscoket。")}}$(".showContent").click(function(){$(this).toggleClass("fa-plus-square fa-minus-square");$(".disable-content").slideToggle(400)});if(/iphone|ipod|ipad|ipad|mobile/i.test(navigator.userAgent.toLowerCase())){$(".share-sd").click(function(){$("#share").animate({opacity:"toggle",top:"-80px"},500).animate({top:"-60px"},"fast");return false})}else{$(".share-sd").mouseover(function(){$(this).children("#share").show()});$(".share-sd").mouseout(function(){$(this).children("#share").hide()})}$("#social .like").click(function(){var f=$(this);var i=$(this).find("a");var h=i.find("i.count");var g=i.data("id");$.bubble.unbind();$.ajax({type:"post",url:"/api/doPraise/"+g,success:function(j){$.alert.ajaxSuccess(j);if(j.status===200){f.effectBubble({y:-80,className:"thumb-bubble",fontSize:1,content:'<i class="fa fa-smile-o"></i>+1'});h.text(parseInt(h.text())+1)}$.bubble.init()},error:function(){$.alert.ajaxError();$.bubble.init()}})});$("img.lazy-img").lazyload({placeholder:appConfig.staticPath+"/img/loading.gif",effect:"fadeIn",threshold:100});$(window).bind("load",function(){var f=setTimeout(function(){$("img.lazy-img").trigger("sporty")},3000)});$(".search-hot li").click(function(){var f=$(this);var g=f.find("a span").text();f.parents(".searchForm").find("input[name=keywords]").val(g);f.parents(".searchForm").find(".nav-search-btn").click()});$(".page-btn li a").click(function(){var h=$(this);var g=h.parents(".page-btn");var j=g.data("search");var i=g.data("url");var f=h.data("page")||1;if(!f){return}var k=i+"/"+f;if(j){$("#searchForm").find("input[name=pageNumber]").val(f);$(".nav-search-btn").click()}else{window.location.href=k}});if($("#notice-box")&&$("#notice-box")[0]){$.ajax({type:"post",url:"/api/listNotice",success:function(g){if(g.status==200&&g.data&&g.data.length>0){var h='{{#data}}<li class="scrolltext-title"><a href="javascript:void(0)" rel="bookmark">{{&content}}</a></li>{{/data}}';var f=Mustache.render(h,g);$("#notice-box").html(f)}},})}$("#myCarousel").mouseover(function(){$(".carousel-control").removeClass("hide")}).mouseout(function(){$(".carousel-control").addClass("hide")}).carousel({interval:5000})});